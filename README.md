# Работа с буфером обмена (clipboard)

## Инструкции по сборке и использованию

Представлены две версии программы: одна использует утилиту **xclip**, другая - нет.

 - Версия с **xclip**.

 1. Необходимо установить утилиту **xclip**. Это можно сделать при помощи команды:
**sudo apt install xclip**, если вы используете пакетный менеджер **apt** (по умолчанию в debian дистрибутивах), или при помощи
**sudo yum install xclip**, если используете **yum** (по умолчанию в RedHat дистрибутивах). 

 2. Компилировать программу командой
**g++ copyToClipboardXclip.cpp -o copyToClipboardXclip**

 3. Запустить программу, формат:
**./copyToClipboardXclip <-s/-f> (строка/имя файла) <строка_для_копирования/файл_для_копирования>**.
Например:
    **./copyToClipboardXclip -s "test"** поместит в БО строку "test", а
	**./copyToClipboardXclip -f "test"** -- содержимое файла "test".

- Версия без **xclip** (позволяет копировать только строки). Основано на статье https://www.uninformativ.de/blog/postings/2017-04-02/0/POSTING-en.html.
1. Необходимо установить библиотеку **X11**:
**sudo apt install libx11-dev**, если вы используете пакетный менеджер **apt** (по умолчанию в debian дистрибутивах), или при помощи
**sudo yum install libx11-devel**, если используете **yum** (по умолчанию в RedHat дистрибутивах). 
2. Компилировать программу командой
**gcc copyToClipboardNoXclip.c -o copyToClipboardNoXclip -lX11**
3. Запустить программу, формат:
**./copyToClipboardNoXclip <строка_для_копирования>**

## Вопросы и ответы на них
1. **Какая структура у буфера обмена в линуксе?**

Непосредственно в ядре ОС буфер обмена не предусмотрен. Буфер обмена в linux реализуется оконной ситемой, например X11 (самая распространенна на данный момент) или Wayland (набирающая популярность система, пришедшая на замену устаревшего X11). Далее будем рассматривать БО в X11.

В X11 предусмотрены "из коробки (фиксированные атомы по умолчанию)" 2 буфера обмена (PRIMARY и SECONDARY). В буфер PRIMARY помещается выделенный мышкой текст, при этом нет необходимости как-либо подтверждать ввод. Для вставки необходимо нажать СКМ. Буфер SECONDARY на практике не используется. Windows-подобный БО не имеет фиксированного заданного имени "атома", однако по договоренности испозуется CLIPBOARD. Данный буфер обмена работает (внешне) как БО в windows. Детали изложены в статье https://www.uninformativ.de/blog/postings/2017-04-02/0/POSTING-en.html. Отсюда же взята реализация прграммы без xclip.

2. **Какое отличие между разными дистрибутивами линукс в работе буфера обмена?**

Отличия обусловлены тем, какие графические оболочки поддерживает тот или ной дистрибутив, а именно -- какой оконный менеджер используется. 

3. **Есть ли разница между разными графическими оболочками?**

Да, разница есть, если графические оболочки используют разные оконные менеджеры (X11/Wayland).

4. **Отличается ли чем-то работа с БО в линуксе и в виндовс?**

Да, в Windows работа с БО является частью WinAPI, в то время как в Linux -- оконного менеджера, используемого в системе.
